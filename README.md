# -_CRUD_biblioteca_java_MVC_oracle_19c_- :.
# CRUD Biblioteca – Java MVC + Oracle 19c .

<img width="1024" height="1024" alt="image" src="https://github.com/user-attachments/assets/23c65fc5-57a0-463b-a5d6-3d7deb227af0" />  

A continuación se presenta una **solución completa, profesional y alineada con el patrón Modelo–Vista–Controlador (MVC)**, desarrollada en **Java (IntelliJ IDEA)**, que implementa un **CRUD de una Biblioteca** con persistencia en **Oracle Database 19c** mediante **JDBC**.

La solución está pensada para **uso académico o técnico**, con separación clara de responsabilidades y código listo para ejecución.

---

## 1. Arquitectura MVC propuesta
```
biblioteca-mvc/
│
├── model/
│ └── Libro.java
│
├── dao/
│ ├── ConexionOracle.java
│ └── LibroDAO.java
│
├── controller/
│ └── LibroController.java
│
├── view/
│ └── BibliotecaView.java
│
└── Main.java
```
---

## 2. Base de Datos – Oracle 19c

### Tabla `LIBRO`

```sql
CREATE TABLE LIBRO (
    ID NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TITULO VARCHAR2(100),
    AUTOR VARCHAR2(100),
    ANIO NUMBER
);

3. Modelo (Model)
model/Libro.java

package model;

public class Libro {

    private int id;
    private String titulo;
    private String autor;
    private int anio;

    public Libro() {}

    public Libro(String titulo, String autor, int anio) {
        this.titulo = titulo;
        this.autor = autor;
        this.anio = anio;
    }

    public int getId() { return id; }
    public void setId(int id) { this.id = id; }

    public String getTitulo() { return titulo; }
    public void setTitulo(String titulo) { this.titulo = titulo; }

    public String getAutor() { return autor; }
    public void setAutor(String autor) { this.autor = autor; }

    public int getAnio() { return anio; }
    public void setAnio(int anio) { this.anio = anio; }
}

4. Acceso a Datos (DAO)
dao/ConexionOracle.java

package dao;

import java.sql.Connection;
import java.sql.DriverManager;

public class ConexionOracle {

    private static final String URL =
            "jdbc:oracle:thin:@localhost:1521/XEPDB1";
    private static final String USER = "BIBLIOTECA";
    private static final String PASSWORD = "oracle";

    public static Connection getConexion() {
        try {
            return DriverManager.getConnection(URL, USER, PASSWORD);
        } catch (Exception e) {
            throw new RuntimeException("Error de conexión Oracle", e);
        }
    }
}

dao/LibroDAO.java

package dao;

import model.Libro;
import java.sql.*;
import java.util.ArrayList;
import java.util.List;

public class LibroDAO {

    public void insertar(Libro libro) {
        String sql = "INSERT INTO LIBRO (TITULO, AUTOR, ANIO) VALUES (?, ?, ?)";
        try (Connection con = ConexionOracle.getConexion();
             PreparedStatement ps = con.prepareStatement(sql)) {

            ps.setString(1, libro.getTitulo());
            ps.setString(2, libro.getAutor());
            ps.setInt(3, libro.getAnio());
            ps.executeUpdate();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public List<Libro> listar() {
        List<Libro> libros = new ArrayList<>();
        String sql = "SELECT * FROM LIBRO";

        try (Connection con = ConexionOracle.getConexion();
             Statement st = con.createStatement();
             ResultSet rs = st.executeQuery(sql)) {

            while (rs.next()) {
                Libro l = new Libro();
                l.setId(rs.getInt("ID"));
                l.setTitulo(rs.getString("TITULO"));
                l.setAutor(rs.getString("AUTOR"));
                l.setAnio(rs.getInt("ANIO"));
                libros.add(l);
            }

        } catch (Exception e) {
            e.printStackTrace();
        }
        return libros;
    }

    public void actualizar(Libro libro) {
        String sql =
            "UPDATE LIBRO SET TITULO=?, AUTOR=?, ANIO=? WHERE ID=?";
        try (Connection con = ConexionOracle.getConexion();
             PreparedStatement ps = con.prepareStatement(sql)) {

            ps.setString(1, libro.getTitulo());
            ps.setString(2, libro.getAutor());
            ps.setInt(3, libro.getAnio());
            ps.setInt(4, libro.getId());
            ps.executeUpdate();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public void eliminar(int id) {
        String sql = "DELETE FROM LIBRO WHERE ID=?";
        try (Connection con = ConexionOracle.getConexion();
             PreparedStatement ps = con.prepareStatement(sql)) {

            ps.setInt(1, id);
            ps.executeUpdate();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}

5. Controlador (Controller)
controller/LibroController.java

package controller;

import dao.LibroDAO;
import model.Libro;
import java.util.List;

public class LibroController {

    private final LibroDAO dao = new LibroDAO();

    public void agregarLibro(String titulo, String autor, int anio) {
        dao.insertar(new Libro(titulo, autor, anio));
    }

    public List<Libro> obtenerLibros() {
        return dao.listar();
    }

    public void actualizarLibro(int id, String titulo, String autor, int anio) {
        Libro l = new Libro(titulo, autor, anio);
        l.setId(id);
        dao.actualizar(l);
    }

    public void eliminarLibro(int id) {
        dao.eliminar(id);
    }
}

6. Vista (View – Consola)
view/BibliotecaView.java

package view;

import controller.LibroController;
import model.Libro;
import java.util.Scanner;

public class BibliotecaView {

    private final LibroController controller = new LibroController();
    private final Scanner sc = new Scanner(System.in);

    public void menu() {
        int opcion;

        do {
            System.out.println("\n--- BIBLIOTECA ---");
            System.out.println("1. Agregar libro");
            System.out.println("2. Listar libros");
            System.out.println("3. Actualizar libro");
            System.out.println("4. Eliminar libro");
            System.out.println("0. Salir");
            opcion = sc.nextInt();
            sc.nextLine();

            switch (opcion) {
                case 1 -> agregar();
                case 2 -> listar();
                case 3 -> actualizar();
                case 4 -> eliminar();
            }
        } while (opcion != 0);
    }

    private void agregar() {
        System.out.print("Título: ");
        String t = sc.nextLine();
        System.out.print("Autor: ");
        String a = sc.nextLine();
        System.out.print("Año: ");
        int y = sc.nextInt();
        controller.agregarLibro(t, a, y);
    }

    private void listar() {
        for (Libro l : controller.obtenerLibros()) {
            System.out.println(
                l.getId() + " | " + l.getTitulo() + " | " +
                l.getAutor() + " | " + l.getAnio()
            );
        }
    }

    private void actualizar() {
        System.out.print("ID: ");
        int id = sc.nextInt(); 
        sc.nextLine();
        System.out.print("Nuevo título: ");
        String t = sc.nextLine();
        System.out.print("Nuevo autor: ");
        String a = sc.nextLine();
        System.out.print("Nuevo año: ");
        int y = sc.nextInt();
        controller.actualizarLibro(id, t, a, y);
    }

    private void eliminar() {
        System.out.print("ID a eliminar: ");
        controller.eliminarLibro(sc.nextInt());
    }
}

7. Clase Principal
Main.java

import view.BibliotecaView;

public class Main {
    public static void main(String[] args) {
        new BibliotecaView().menu();
    }
}

8. Tecnologías Utilizadas
Java SE
IntelliJ IDEA
JDBC
Oracle Database 19c
Patrón MVC
Programación por capas

9. Posibles Extensiones
Interfaz gráfica con Swing o JavaFX
Validaciones de datos
Búsqueda por título o autor
Logging (Log4j)
Arquitectura DAO + Service
:. . / .
